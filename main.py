

import time
import tag_process      # æ­¥éª¤1: å…³é”®è¯æ‰“æ ‡
import llm_analyze      # æ­¥éª¤2: è½»é‡çº§LLMåˆ†æ (æƒ…æ„Ÿ+ä¸»é¢˜)
import generate_report  # æ­¥éª¤3: èšåˆLLMåˆ†æä¸æŠ¥å‘Šç”Ÿæˆ

def run_full_pipeline():
    """
    æŒ‰é¡ºåºæ‰§è¡Œä¼˜åŒ–åçš„æ•°æ®åˆ†ææµç¨‹ã€‚
    """
    start_time = time.time()
    print("=========================================")
    print("ğŸš€ å¼€å§‹æ‰§è¡Œä¼˜åŒ–ç‰ˆæ•°æ®åˆ†ææµç¨‹...")
    print("=========================================\n")

    # æ­¥éª¤ 1: å…³é”®è¯åˆæ­¥æ‰“æ ‡
    print("--- [æ­¥éª¤ 1/3] å¼€å§‹æ‰§è¡Œå…³é”®è¯åˆæ­¥æ‰“æ ‡... ---")
    try:
        tag_process.main()
        print("--- [æ­¥éª¤ 1/3] åˆæ­¥æ‰“æ ‡å®Œæˆï¼ ---\n")
    except Exception as e:
        print(f"âŒ æ­¥éª¤ 1 æ‰§è¡Œå¤±è´¥: {e}")
        return

    # æ­¥éª¤ 2: LLMè½»é‡çº§åˆ†æï¼ˆæƒ…æ„Ÿ & ä¸»é¢˜ï¼‰
    print("--- [æ­¥éª¤ 2/3] å¼€å§‹æ‰§è¡Œ LLM è½»é‡çº§åˆ†æ (æƒ…æ„Ÿä¸ä¸»é¢˜)... ---")
    print("ï¼ˆæ­¤æ­¥éª¤å°†ä¸ºæ¯æ¡ç›¸å…³è¯„è®ºè°ƒç”¨ä¸€æ¬¡LLMï¼Œè¯·è€å¿ƒç­‰å¾…...ï¼‰")
    try:
        llm_analyze.main()
        print("--- [æ­¥éª¤ 2/3] LLM è½»é‡çº§åˆ†æå®Œæˆï¼ ---\n")
    except Exception as e:
        print(f"âŒ æ­¥éª¤ 2 æ‰§è¡Œå¤±è´¥: {e}")
        return

    # æ­¥éª¤ 3: èšåˆåˆ†æä¸æŠ¥å‘Šç”Ÿæˆ
    print("--- [æ­¥éª¤ 3/3] å¼€å§‹èšåˆåˆ†æå¹¶ç”Ÿæˆæœ€ç»ˆæŠ¥å‘Š... ---")
    print("ï¼ˆæ­¤æ­¥éª¤å°†ä¸ºæ¯ä¸ªä¸»é¢˜è°ƒç”¨ä¸€æ¬¡LLMè¿›è¡Œæ·±åº¦æ€»ç»“ï¼Œæ•ˆç‡æ›´é«˜...ï¼‰")
    try:
        generate_report.main()
        print("--- [æ­¥éª¤ 3/3] æœ€ç»ˆæŠ¥å‘Šç”Ÿæˆå®Œæˆï¼ ---\n")
    except Exception as e:
        print(f"âŒ æ­¥éª¤ 3 æ‰§è¡Œå¤±è´¥: {e}")
        return

    end_time = time.time()
    total_time = end_time - start_time
    print("=========================================")
    print(f"âœ… å…¨éƒ¨åˆ†ææµç¨‹æ‰§è¡Œå®Œæ¯•ï¼æ€»è€—æ—¶: {total_time:.2f} ç§’ã€‚")
    print("=========================================")

if __name__ == "__main__":
    run_full_pipeline()